plugins {
    id 'org.jetbrains.kotlin.jvm' version '1.3.72'
    id 'com.github.johnrengelman.shadow' version '5.0.0'
}
group 'com.example'
version '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

dependencies {
    implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk8"
    implementation "org.http4k:http4k-core:3.255.0"
    implementation "org.http4k:http4k-serverless-lambda:3.255.0"
    //implementation "org.http4k:http4k-aws:3.254.0"
    implementation "org.http4k:http4k-client-apache:3.255.0"
    implementation "org.http4k:http4k-format-jackson:3.255.0"
    implementation "org.http4k:http4k-server-jetty:3.255.0"

}

task buildZip(type: Zip) {
    manifest {
        attributes (
                'Implementation-Title': 'AWS Handler',
                'Implementation-Version': archiveVersion,
                'Main-Class': 'TweetEchoLambda'
        )
    }
    from compileJava
    from processResources
    into('lib') {
        from configurations.runtimeClasspath
    }
}

compileKotlin {
    kotlinOptions.jvmTarget = "1.8"
}
compileTestKotlin {
    kotlinOptions.jvmTarget = "1.8"
}